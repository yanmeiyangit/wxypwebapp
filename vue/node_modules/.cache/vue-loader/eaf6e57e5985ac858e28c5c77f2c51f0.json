{"remainingRequest":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/mia/Documents/wxypapp/Vue-shopping/vue/src/views/AddressEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/src/views/AddressEdit.vue","mtime":1554103443661},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {vuexData} from 'js/mixin'\nimport {$toast} from 'vant'\nexport default {\n    name: 'AddressEdit',\n    mixins:[vuexData],\n    data() {\n        return {\n            searchResult: [],\n            areaList: require('js/area.js').default,\n            showDelete: false\n        }\n    },\n\n    created() {\n        if (this.addressInfo) {\n            this.showDelete = true\n        }\n    },\n    methods: {\n        async onSave(val) {\n            // 以下参数在api接口查看详情\n            try {\n                const {data} = await this.Api.postAddress({\n                        name: val.name,\n                        tel: val.tel,\n                        address: val.province + val.city + val.county + val.addressDetail,\n                        isDefault: val.isDefault,\n                        province: val.province,\n                        city: val.city,\n                        county: val.county,\n                        addressDetail: val.addressDetail,\n                        areaCode: val.areaCode,\n                        id: this.addressInfo ? this.addressInfo._id : undefined  // 修改地址时候要传id\n                })\n                    if (data.code == 200) {\n                        this.$toast(data.msg);\n                        setTimeout(() => {\n                            // this.$router.go(-1)\n                            this.goBack()\n                            this.clearAddress('')\n                        }, 1000);\n                    } else {\n                        this.$router.push({name: 'Login'})\n                    }\n                \n            } catch (error) {\n                this.$toast('网络错误')\n            }\n            \n        },\n        async onDelete(val) {\n            try {\n                const {data} = await this.Api.deleteAddress(val._id)\n                if (data.code == 200) {\n                    this.$toast(data.msg);\n                    setTimeout(() => {\n                        // this.$router.go(-1)\n                        this.goBack()\n                        this.clearAddress('')\n                    }, 1000);\n                }else {\n                    this.$router.push({name: 'Login'})\n                }\n            } catch (error) {\n                this.$toast('网络错误')\n            }\n        },\n        \n        goBack() {\n            this.$router.go(-1)\n            this.$router.animate = 1\n            setTimeout(() => {\n                this.clearAddress('')\n            }, 300);\n        },\n\n    }\n}\n",{"version":3,"sources":["AddressEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"AddressEdit.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <!-- 新增和编辑地址 -->\n    <div class=\"address-edit\">\n        <van-nav-bar\n            title=\"编辑地址\"\n            left-arrow\n            @click-left=\"goBack\"\n        />\n        <div>\n            <van-address-edit\n                :area-list=\"areaList\"\n                :show-delete='showDelete'\n                show-set-default\n                show-search-result\n                :addressInfo='addressInfo'\n                :search-result=\"searchResult\"\n                @save=\"onSave\"\n                @delete=\"onDelete\"\n            />\n        </div>\n    </div>\n</template>\n\n<script>\nimport {vuexData} from 'js/mixin'\nimport {$toast} from 'vant'\nexport default {\n    name: 'AddressEdit',\n    mixins:[vuexData],\n    data() {\n        return {\n            searchResult: [],\n            areaList: require('js/area.js').default,\n            showDelete: false\n        }\n    },\n\n    created() {\n        if (this.addressInfo) {\n            this.showDelete = true\n        }\n    },\n    methods: {\n        async onSave(val) {\n            // 以下参数在api接口查看详情\n            try {\n                const {data} = await this.Api.postAddress({\n                        name: val.name,\n                        tel: val.tel,\n                        address: val.province + val.city + val.county + val.addressDetail,\n                        isDefault: val.isDefault,\n                        province: val.province,\n                        city: val.city,\n                        county: val.county,\n                        addressDetail: val.addressDetail,\n                        areaCode: val.areaCode,\n                        id: this.addressInfo ? this.addressInfo._id : undefined  // 修改地址时候要传id\n                })\n                    if (data.code == 200) {\n                        this.$toast(data.msg);\n                        setTimeout(() => {\n                            // this.$router.go(-1)\n                            this.goBack()\n                            this.clearAddress('')\n                        }, 1000);\n                    } else {\n                        this.$router.push({name: 'Login'})\n                    }\n                \n            } catch (error) {\n                this.$toast('网络错误')\n            }\n            \n        },\n        async onDelete(val) {\n            try {\n                const {data} = await this.Api.deleteAddress(val._id)\n                if (data.code == 200) {\n                    this.$toast(data.msg);\n                    setTimeout(() => {\n                        // this.$router.go(-1)\n                        this.goBack()\n                        this.clearAddress('')\n                    }, 1000);\n                }else {\n                    this.$router.push({name: 'Login'})\n                }\n            } catch (error) {\n                this.$toast('网络错误')\n            }\n        },\n        \n        goBack() {\n            this.$router.go(-1)\n            this.$router.animate = 1\n            setTimeout(() => {\n                this.clearAddress('')\n            }, 300);\n        },\n\n    }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.address-edit\n    position fixed\n    top 0px\n    left 0\n    right 0\n    bottom 0\n    z-index 200\n    background #fff\n.bounce2-enter-active {\n    animation: bounce-in .3s;\n        }\n    .bounce2-leave-active {\n            animation: bounce-in .3s reverse;\n            }\n    @keyframes bounce-in {\n    0% {\n        transform: translate3d(-100%,0,0)\n        }\n    \n    100% {\n        transform: translate3d(0,0,0)\n        }\n}     \n</style>"]}]}