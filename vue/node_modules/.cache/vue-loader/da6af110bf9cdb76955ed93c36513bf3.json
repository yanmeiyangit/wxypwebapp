{"remainingRequest":"/Users/mia/Documents/wxypwebapp/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mia/Documents/wxypwebapp/vue/src/views/ShoppingCart.vue?vue&type=style&index=0&id=0a4f6c3c&lang=stylus&scoped=true&","dependencies":[{"path":"/Users/mia/Documents/wxypwebapp/vue/src/views/ShoppingCart.vue","mtime":1554103443665},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.card >>> .checkbox-component>input+label>.input-box {\n    height: 17px;\n    width: 17px;\n    border: 1px solid red;\n}\n\n.card >>> .checkbox-component>input+label>.input-box>.input-box-tick>path {\n    stroke: red;\n}\n\n.card {\n    position: fixed;\n    top: 0px;\n    left: 0;\n    right: 0;\n    bottom: 0px;\n\n    .scroll {\n        position: fixed;\n        top: 38px;\n        bottom: 50px;\n        left: 0;\n        right: 0;\n        overflow: hidden;\n\n        .ul {\n            margin: 0 10px;\n\n            li {\n                display: flex;\n                align-items: center;\n                height: 90px;\n                padding-bottom: 10px;\n                margin-top: 10px;\n\n                .left {\n                    width: 40px;\n                    flex: 0 0 40px;\n                }\n\n                .middle {\n                    width: 80px;\n                    flex: 0 0 80px;\n                    padding: 1px;\n                    box-sizing: border-box;\n\n                    img {\n                        width: 100%;\n                    }\n                }\n\n                .right {\n                    flex: 1;\n                    height: 100px;\n                    display: flex;\n                    flex-direction: column;\n                    justify-content: space-around;\n                    padding: 0 5px 0 15px;\n                    box-sizing: border-box;\n\n                    .name {\n                        font-size: 14px;\n                        color: #e0322b;\n                    }\n\n                    div {\n                        display: flex;\n                        justify-content: space-between;\n                        padding: 0 20px 0 0;\n\n                        .one {\n                            font-size: 16px;\n                            color: #e0322b;\n\n                            span {\n                                font-size: 14px;\n                            }\n                        }\n\n                        .two {\n                            width: 80px;\n                            font-size: 19px;\n                            display: flex;\n                            align-items: center;\n                            justify-content: space-between;\n\n                            i {\n                                color: #747474;\n                            }\n\n                            span {\n                                padding: 0 10px;\n                                font-size: 16px;\n                            }\n                        }\n                    }\n                }\n            }\n\n            .pics {\n                display: flex;\n                height: 50px;\n                align-items: center;\n                padding: 10px 0;\n                justify-content: space-between;\n\n                .checkedAll {\n                    font-size: 15px;\n                }\n\n                .quanxuan {\n                    position: relative;\n                    width: 40px;\n                    height: 50px;\n                    display: flex;\n                    align-items: center;\n\n                    .span {\n                        position: absolute;\n                        top: 50%;\n                        transform: translateY(-50%);\n                        font-size: 14px;\n                        width: 60px;\n                        left: 25px;\n                    }\n                }\n\n                .total {\n                    align-content: flex-end;\n                    font-size: 14px;\n                    height: 50px;\n                    display: flex;\n                    flex-direction: column;\n                    justify-content: space-around;\n                    width: 145px;\n\n                    span {\n                        color: #e0322b;\n                        font-weight: bold;\n                    }\n                }\n            }\n\n            .confirm {\n                display: flex;\n                flex-direction: row;\n                justify-content: flex-end;\n                margin-top: 5px;\n                margin-bottom: 10px;\n\n                .notijiao {\n                    height: 35px;\n                    padding: 0 15px;\n                    font-size: 14px;\n                    margin-right: 5px;\n                    line-height: 35px;\n                    border-radius: 2px;\n                    background: #E5E5E5;\n                    color: #D3D3D4;\n                }\n\n                .delete {\n                    background: #E6057F;\n                    color: #fff;\n                }\n            }\n        }\n    }\n\n    .shop-warpper {\n        width: 100%;\n        padding-top: 20px;\n\n        .shop {\n            display: flex;\n            background: #F2F2F2;\n            flex-direction: column;\n            justify-content: center;\n            margin-top: 40px;\n            background: #F6F6F6;\n            width: 125px;\n            height: 125px;\n            border-radius: 50%;\n            text-align: center;\n            margin: auto;\n            position: relative;\n\n            img {\n                width: 70%;\n                margin: 0 auto;\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n            }\n        }\n\n        .desc2 {\n            height: 40px;\n            width: 150px;\n            line-height: 40px;\n            border: 1px solid #000;\n            text-align: center;\n            margin: 0 auto;\n            border-radius: 25px;\n            font-size: 17px;\n            margin-top: 35px;\n        }\n\n        .desc {\n            text-align: center;\n            margin-top: 25px;\n            font-size: 16px;\n            color: #666;\n        }\n    }\n}\n",{"version":3,"sources":["ShoppingCart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwOA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ShoppingCart.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"card page-tab\">\n        <van-nav-bar title=\"购物车\" :left-arrow=\"false\"/>\n        <Scroll :data=\"shopList\" class=\"scroll\" ref=\"scroll\" v-show=\"shopList && shopList.length\">\n            <ul class=\"ul\" v-show=\"!showFlag\">\n                <div class=\"pics border-bottom\" v-show=\"shopList.length\">\n                    <div class=\"quanxuan\">\n                        <input id=\"select\" type=\"checkbox\" @change=\"change\" v-model=\"allCheck\">\n                        <label for=\"select\" class=\"span\">{{allCheck?'取消全选':'全选'}}</label>\n                    </div>\n                    <div class=\"total\">\n                        <p>合计：\n                            <span>￥{{totalPrice | toFixed}}</span>\n                        </p>\n                        <p v-if=\"deleteFlag\">请确认订单</p>\n                    </div>\n                </div>\n                <div class=\"confirm\" v-show=\"shopList.length\">\n                    <div class=\"notijiao delete\" v-if=\"deleteFlag\" @click=\"deletes\">删除</div>\n                    <div class=\"notijiao delete\" v-if=\"deleteFlag\" @click=\"placeOrder\">去结算</div>\n                </div>\n                <li class=\"border-bottom\" v-for=\"val of shopList\" :key=\"val.id\">\n                    <div class=\"left\">\n                        <input type=\"checkbox\" v-model=\"val.check\" @change=\"itemChange(val)\">\n                    </div>\n                    <div class=\"middle border\">\n                        <img :src=\"val.image_path\" :onerror=\"defaultImg\">\n                    </div>\n                    <div class=\"right\">\n                        <p class=\"name\">{{val.name}}</p>\n                        <div>\n                            <p class=\"one\">\n                                <span>￥</span>\n                                {{(val.present_price * val.count) | toFixed}}\n                            </p>\n                            <p class=\"two\">\n                                <i class=\"iconfont icon-jian\" @click=\"editCart('minu',val)\"></i>\n                                <span>{{val.count}}</span>\n                                <i @click=\"editCart('add',val)\" class=\"iconfont icon-jia\"></i>\n                            </p>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </Scroll>\n        <div class=\"shop-warpper\" v-show=\"!shopList.length && !showFlag\">\n            <div class=\"shop\">\n                <img :src=\"noShop\" alt>\n            </div>\n            <p class=\"desc\">{{!userName?'请先登录噢~~':'您的购物还是空空的哦'}}</p>\n            <p class=\"desc2\" @click=\"goshop\" v-if=\"userName\">去购物</p>\n            <p class=\"desc2\" @click=\"goLogin\" v-else>去登录</p>\n        </div>\n        <BaseFooter active='2'/>\n        <router-view/>\n        <BaseLoding :showFlag=\"showFlag\"/>\n    </div>\n</template>\n\n<script>\nimport Scroll from \"public/Scroll\";\nimport { vuexData } from \"js/mixin\";\nimport BaseFooter from 'public/BaseFooter'\nexport default {\n    name: \"ShoppingCart\",\n    mixins: [vuexData],\n    data() {\n        return {\n            shopList: \"\",\n            checked: false,\n            checkList: [],\n            checkListId: [],\n            floorName: \"为你推荐\",\n            defaultImg: 'this.src=\"' + require(\"img/vue.jpg\") + '\"',\n            allCheck: false,\n            deleteFlag: false,\n            noShop: require(\"img/shop.png\"),\n            isLogin: false,\n        };\n    },\n    computed: {\n        totalPrice() {\n            let tatol = 0;\n            if (this.shopList.length) {\n                this.shopList.forEach(item => {\n                    if (item.check) {\n                        tatol += item.present_price * item.count;\n                    }\n                });\n                return tatol\n            }\n            return 0;\n        }\n    },\n    components: {\n        Scroll,\n        BaseFooter\n    },\n    methods: {\n        //全选\n        change() {\n            this.shopList.forEach((v, o) => {\n                v.check = this.allCheck;\n                if (v.check) {\n                    this.deleteFlag = true;\n                } else {\n                    this.deleteFlag = false;\n                }\n            });\n        },\n\n        //单选勾住后全选\n        itemChange(val) {\n            let select = this.shopList.filter((v, o) => {\n                return v.check == true;\n            });\n            select.length == this.shopList.length\n                ? (this.allCheck = true)\n                : (this.allCheck = false);\n            for (let i = 0; i < this.shopList.length; i++) {\n                if (this.shopList[i].check) {\n                    this.deleteFlag = true;\n                    break;\n                } else {\n                    this.deleteFlag = false;\n                }\n            }\n        },\n\n        async getShopList() {\n            try {\n                this.showFlag = true;\n                const { data } = await this.Api.getCard();\n                if (data.code == -10000) {\n                    this.isLogin = true;\n                    this.showFlag = false;\n                } else {\n                    this.showFlag = false;\n                    this.shopList = data.shopList;\n                }\n            } catch (error) {\n                this.$toast(\"网络连接失败\");\n                this.showFlag = false;\n            }\n        },\n\n        goshop() {\n            this.$router.push({ name: \"Home\" });\n        },\n\n        // 加减商品\n        async editCart(flag, val) {\n            console.log(val);\n\n            if (flag == \"minu\") {\n                if (val.count <= 1) {\n                    return;\n                }\n                val.count--;\n            } else if (flag == \"add\") {\n                if (val.count >= 50) {\n                    this.$toast(\"最多购买50件噢~~\");\n                    return;\n                }\n                val.count++;\n            }\n            const mallPrice = (val.present_price * val.count).toFixed(2);\n            this.Api.editCart(val.count, val.cid, mallPrice);\n        },\n        // 删除商品\n        deletes() {\n            let id = [];\n            this.shopList.forEach(item => {\n                if (item.check) {\n                    id.push(item.cid);\n                    this.$dialog\n                        .confirm({\n                            title: \"提示\",\n                            message: `确认删除商品吗?`\n                        })\n                        .then(() => {\n                            this.deleteShop(id);\n                        });\n                }\n            });\n        },\n\n        // 删除购物车商品\n        async deleteShop(id) {\n            try {\n                const { data } = await this.Api.deleteShop(id);\n                if (data.code == 200) {\n                    this.deleteFlag = false;\n                    this.$toast(data.msg);\n                    this.getShopList();\n                }\n            } catch (error) {\n                this.$toast(\"删除失败,网络错误\");\n            }\n        },\n\n        // 推荐随机商品\n        // async getRandom() {\n        //   let res = await axios.get(\"/this.Api/getCard/recommend\");\n        //   if (res.data.code == 1) {\n        //     this.tablist(res.data.shopRecommend);\n        //   }\n        // },\n\n        // 提交订单\n        placeOrder() {\n            let id = [];\n            this.$router.push({ name: \"ShoppingPayMent\" });\n            this.shopList.forEach(item => {\n                if (item.check) {\n                    id.push(item);\n                }\n            });\n            this.setShopList(id);\n        },\n\n        goLogin() {\n            this.$router.push({ name: \"Login\" });\n        }\n    },\n    created() {\n        this.getShopList();\n    }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n.card >>> .checkbox-component>input+label>.input-box {\n    height: 17px;\n    width: 17px;\n    border: 1px solid red;\n}\n\n.card >>> .checkbox-component>input+label>.input-box>.input-box-tick>path {\n    stroke: red;\n}\n\n.card {\n    position: fixed;\n    top: 0px;\n    left: 0;\n    right: 0;\n    bottom: 0px;\n\n    .scroll {\n        position: fixed;\n        top: 38px;\n        bottom: 50px;\n        left: 0;\n        right: 0;\n        overflow: hidden;\n\n        .ul {\n            margin: 0 10px;\n\n            li {\n                display: flex;\n                align-items: center;\n                height: 90px;\n                padding-bottom: 10px;\n                margin-top: 10px;\n\n                .left {\n                    width: 40px;\n                    flex: 0 0 40px;\n                }\n\n                .middle {\n                    width: 80px;\n                    flex: 0 0 80px;\n                    padding: 1px;\n                    box-sizing: border-box;\n\n                    img {\n                        width: 100%;\n                    }\n                }\n\n                .right {\n                    flex: 1;\n                    height: 100px;\n                    display: flex;\n                    flex-direction: column;\n                    justify-content: space-around;\n                    padding: 0 5px 0 15px;\n                    box-sizing: border-box;\n\n                    .name {\n                        font-size: 14px;\n                        color: #e0322b;\n                    }\n\n                    div {\n                        display: flex;\n                        justify-content: space-between;\n                        padding: 0 20px 0 0;\n\n                        .one {\n                            font-size: 16px;\n                            color: #e0322b;\n\n                            span {\n                                font-size: 14px;\n                            }\n                        }\n\n                        .two {\n                            width: 80px;\n                            font-size: 19px;\n                            display: flex;\n                            align-items: center;\n                            justify-content: space-between;\n\n                            i {\n                                color: #747474;\n                            }\n\n                            span {\n                                padding: 0 10px;\n                                font-size: 16px;\n                            }\n                        }\n                    }\n                }\n            }\n\n            .pics {\n                display: flex;\n                height: 50px;\n                align-items: center;\n                padding: 10px 0;\n                justify-content: space-between;\n\n                .checkedAll {\n                    font-size: 15px;\n                }\n\n                .quanxuan {\n                    position: relative;\n                    width: 40px;\n                    height: 50px;\n                    display: flex;\n                    align-items: center;\n\n                    .span {\n                        position: absolute;\n                        top: 50%;\n                        transform: translateY(-50%);\n                        font-size: 14px;\n                        width: 60px;\n                        left: 25px;\n                    }\n                }\n\n                .total {\n                    align-content: flex-end;\n                    font-size: 14px;\n                    height: 50px;\n                    display: flex;\n                    flex-direction: column;\n                    justify-content: space-around;\n                    width: 145px;\n\n                    span {\n                        color: #e0322b;\n                        font-weight: bold;\n                    }\n                }\n            }\n\n            .confirm {\n                display: flex;\n                flex-direction: row;\n                justify-content: flex-end;\n                margin-top: 5px;\n                margin-bottom: 10px;\n\n                .notijiao {\n                    height: 35px;\n                    padding: 0 15px;\n                    font-size: 14px;\n                    margin-right: 5px;\n                    line-height: 35px;\n                    border-radius: 2px;\n                    background: #E5E5E5;\n                    color: #D3D3D4;\n                }\n\n                .delete {\n                    background: #E6057F;\n                    color: #fff;\n                }\n            }\n        }\n    }\n\n    .shop-warpper {\n        width: 100%;\n        padding-top: 20px;\n\n        .shop {\n            display: flex;\n            background: #F2F2F2;\n            flex-direction: column;\n            justify-content: center;\n            margin-top: 40px;\n            background: #F6F6F6;\n            width: 125px;\n            height: 125px;\n            border-radius: 50%;\n            text-align: center;\n            margin: auto;\n            position: relative;\n\n            img {\n                width: 70%;\n                margin: 0 auto;\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n            }\n        }\n\n        .desc2 {\n            height: 40px;\n            width: 150px;\n            line-height: 40px;\n            border: 1px solid #000;\n            text-align: center;\n            margin: 0 auto;\n            border-radius: 25px;\n            font-size: 17px;\n            margin-top: 35px;\n        }\n\n        .desc {\n            text-align: center;\n            margin-top: 25px;\n            font-size: 16px;\n            color: #666;\n        }\n    }\n}\n</style>\n"]}]}