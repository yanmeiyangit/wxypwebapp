{"remainingRequest":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/mia/Documents/wxypapp/Vue-shopping/vue/src/views/My.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/src/views/My.vue","mtime":1554103443664},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport UserInfo from \"@/components/my/UserInfo\";\nimport { vuexData } from \"js/mixin\";\nimport BaseFooter from 'public/BaseFooter'\nexport default {\n    name: \"My\",\n    mixins: [vuexData],\n\n    components: {\n        UserInfo,\n        BaseFooter,\n    },\n    data() {\n        return {\n            show: false,\n            defaultImg: 'this.src=\"' + require(\"img/vue.jpg\") + '\"',\n            orderNum: \"\", //订单数量，\n            // 0,待付款 1，待发货 2，待收货 3，评价 4，已完成\n            tabs: [\n                { status: 1, icon: \"balance-pay\", title: \"待付款\" },\n                { status: 2, icon: \"free-postage\", title: \"待发货\" },\n                { status: 3, icon: \"points\", title: \"待收货\" },\n                { status: 4, icon: \"thumb-circle-o\", title: \"评价\" },\n                { status: 5, icon: \"like-o\", title: \"已完成\" }\n            ]\n        };\n    },\n\n    methods: {\n        settingUser() {\n            this.$refs.userInfo.showPop();\n        },\n\n        login() {\n            this.$router.push({ name: \"Login\" });\n        },\n\n        address() {\n            if (this.userName) {\n                this.$router.push({ name: \"Address\" });\n            } else {\n                this.$router.push({ name: \"Login\" });\n            }\n        },\n\n        collection() {\n            this.$router.push({ name: \"Collection\" });\n        },\n\n        // 退出登录\n        async loginOut() {\n            try {\n                const { data } = await this.Api.loginOut();\n                if (data.code == 0) {\n                    window.location.reload();\n                    localStorage.clear();\n                }\n            } catch (error) {\n                this.$toast(\"网络错误\");\n            }\n        },\n\n        // 最近浏览\n        goBrowse() {\n            this.$router.push({ name: \"Browse\" });\n        },\n\n        myOrder() {\n            this.$router.push({ name: \"MyOrder\" });\n        },\n\n        status(i) {\n            if (i == 4) {\n                this.$router.push({ name: \"Evaluate\" });\n            } else {\n                if (i == 5) {\n                    i = 4;\n                }\n                this.$router.push({ name: \"MyOrder\", query: { status: i } });\n            }\n        }\n    },\n\n    async created() {\n        try {\n            const { data } = await this.Api.getOrderNum();\n            if (data.code == 200) {\n                this.orderNum = data.numList;\n            }\n        } catch (error) {\n            this.$toast(\"网络错误\");\n        }\n    }\n};\n",{"version":3,"sources":["My.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"My.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"page-tab my\">\n        <van-nav-bar title=\"会员中心\" :left-arrow=\"false\"/>\n        <div class=\"avatar\" v-if=\"!userName\">\n            <img\n                src=\"http://img4.imgtn.bdimg.com/it/u=198369807,133263955&fm=27&gp=0.jpg\"\n                alt\n                srcset\n            >\n            <p @click=\"login\">登录/注册</p>\n        </div>\n        <div class=\"avatar\" v-else>\n            <img :src=\"userName.avatar\" :onerror=\"defaultImg\">\n            <p class=\"usename\">欢迎您：{{userName.nickname}}</p>\n            <p @click=\"loginOut\">退出登录</p>\n            <van-icon name=\"setting\" class=\"setting\" @click=\"settingUser\"/>\n        </div>\n        <div class=\"user-links van-row\">\n            <div\n                class=\"van-col van-col--6 numlist\"\n                v-for=\"(val,index) in tabs\"\n                :key=\"val.status\"\n                @click=\"status(val.status)\"\n            >\n                <van-icon :name=\"val.icon\"/>\n                <span>{{val.title}}</span>\n                <span class=\"num\" v-if=\"orderNum && orderNum[index]!=0\">{{orderNum[index]}}</span>\n            </div>\n        </div>\n        <van-cell-group class=\"user-group\">\n            <van-cell icon=\"records\" title=\"全部订单\" is-link @click=\"myOrder\"/>\n        </van-cell-group>\n\n        <van-cell-group>\n            <van-cell icon=\"star-o\" title=\"收藏商品\" is-link @click=\"collection\"/>\n            <van-cell icon=\"location-o\" @click=\"address\" title=\"地址管理\" is-link/>\n            <van-cell icon=\"eye-o\" title=\"最近浏览\" is-link @click=\"goBrowse\"/>\n        </van-cell-group>\n        <UserInfo ref=\"userInfo\"/>\n        <transition name=\"fade\">\n            <router-view/>\n        </transition>\n        <BaseFooter active='3'/>\n    </div>\n</template>\n\n<script>\nimport UserInfo from \"@/components/my/UserInfo\";\nimport { vuexData } from \"js/mixin\";\nimport BaseFooter from 'public/BaseFooter'\nexport default {\n    name: \"My\",\n    mixins: [vuexData],\n\n    components: {\n        UserInfo,\n        BaseFooter,\n    },\n    data() {\n        return {\n            show: false,\n            defaultImg: 'this.src=\"' + require(\"img/vue.jpg\") + '\"',\n            orderNum: \"\", //订单数量，\n            // 0,待付款 1，待发货 2，待收货 3，评价 4，已完成\n            tabs: [\n                { status: 1, icon: \"balance-pay\", title: \"待付款\" },\n                { status: 2, icon: \"free-postage\", title: \"待发货\" },\n                { status: 3, icon: \"points\", title: \"待收货\" },\n                { status: 4, icon: \"thumb-circle-o\", title: \"评价\" },\n                { status: 5, icon: \"like-o\", title: \"已完成\" }\n            ]\n        };\n    },\n\n    methods: {\n        settingUser() {\n            this.$refs.userInfo.showPop();\n        },\n\n        login() {\n            this.$router.push({ name: \"Login\" });\n        },\n\n        address() {\n            if (this.userName) {\n                this.$router.push({ name: \"Address\" });\n            } else {\n                this.$router.push({ name: \"Login\" });\n            }\n        },\n\n        collection() {\n            this.$router.push({ name: \"Collection\" });\n        },\n\n        // 退出登录\n        async loginOut() {\n            try {\n                const { data } = await this.Api.loginOut();\n                if (data.code == 0) {\n                    window.location.reload();\n                    localStorage.clear();\n                }\n            } catch (error) {\n                this.$toast(\"网络错误\");\n            }\n        },\n\n        // 最近浏览\n        goBrowse() {\n            this.$router.push({ name: \"Browse\" });\n        },\n\n        myOrder() {\n            this.$router.push({ name: \"MyOrder\" });\n        },\n\n        status(i) {\n            if (i == 4) {\n                this.$router.push({ name: \"Evaluate\" });\n            } else {\n                if (i == 5) {\n                    i = 4;\n                }\n                this.$router.push({ name: \"MyOrder\", query: { status: i } });\n            }\n        }\n    },\n\n    async created() {\n        try {\n            const { data } = await this.Api.getOrderNum();\n            if (data.code == 200) {\n                this.orderNum = data.numList;\n            }\n        } catch (error) {\n            this.$toast(\"网络错误\");\n        }\n    }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.my {\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n}\n.avatar {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    text-align: center;\n    align-items: center;\n    background: #e30c7b;\n    padding: 10% 0 10% 0;\n    box-sizing: border-box;\n    position: relative;\n    img {\n        width: 70px;\n        height: 70px;\n        border-radius: 50%;\n    }\n    p {\n        color: #fff;\n        font-size: 14px;\n        margin-top: 20px;\n    }\n}\n.user {\n    &-poster {\n        width: 100%;\n        height: 100%;\n        display: block;\n    }\n    &-group {\n        margin-bottom: 0.3rem;\n    }\n    &-links {\n        padding: 15px 0;\n        font-size: 14px;\n        text-align: center;\n        background-color: #fff;\n        .van-icon {\n            display: block;\n            font-size: 24px;\n            margin-bottom: 10px;\n        }\n    }\n}\n.van-cell {\n    width: 100%;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    padding: 10px 15px;\n    box-sizing: border-box;\n    position: relative;\n    background-color: #fff;\n    color: #333;\n    font-size: 14px;\n    overflow: hidden;\n    align-items: center;\n    .van-cell__left-icon {\n        font-size: 16px;\n        line-height: 24px;\n        margin-right: 5px;\n    }\n    .van-cell__right-icon {\n        color: #999;\n        font-size: 12px;\n        line-height: 35px;\n        margin-left: 5px;\n    }\n}\n.usename {\n    font-weight: 700;\n    font-size: 18px !important;\n}\n.setting {\n    color: #eee;\n    font-size: 20px;\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    padding: 10px;\n}\n\n.numlist {\n    position: relative;\n    width: 20%;\n}\n.numlist .num {\n    position: absolute;\n    right: 15px;\n    top: -8px;\n    color: #fff;\n    background: #e0322b;\n    display: inline-block;\n    width: 20px;\n    height: 20px;\n    line-height: 20px;\n    font-size: 14px;\n    border-radius: 50%;\n}\n</style>"]}]}