{"remainingRequest":"/Users/mia/Documents/wxypwebapp/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mia/Documents/wxypwebapp/vue/src/views/Category.vue?vue&type=style&index=0&id=4d5aa038&scoped=true&lang=stylus&","dependencies":[{"path":"/Users/mia/Documents/wxypwebapp/vue/src/views/Category.vue","mtime":1554103443662},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.category {\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n}\n.content {\n    display: flex;\n    position: fixed;\n    top: 39px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n\n    // background: #EFEFEF\n    .left {\n        flex: 0 0 80px;\n        background: #F1F8FF;\n        padding-bottom: 55px;\n        height: 100%;\n        overflow: hidden;\n\n        ul {\n            height: 100%;\n            overflow: hidden;\n        }\n\n        .active {\n            background: #fff;\n        }\n\n        li {\n            color: #666;\n            height: 43px;\n            line-height: 43px;\n            font-size: 14px;\n            text-align: center;\n            border-bottom: 1px solid #EFEFEF;\n        }\n    }\n\n    .right {\n        flex: 1;\n\n        .empty {\n            text-align: center;\n            font-size: 15px;\n\n            .null {\n                padding-top: 30px;\n                box-sizing: border-box;\n                color: #bbb;\n            }\n\n            .scroll {\n                overflow: hidden;\n                position: fixed;\n                bottom: 50px;\n                top: 85px;\n            }\n        }\n    }\n}\n",{"version":3,"sources":["Category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Category.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class='page-tab category'>\n        <van-nav-bar title=\"商品分类\" :left-arrow=\"false\" fixed/>\n        <div class=\"content\">\n            <div class=\"left\" ref=\"left\">\n                <ul>\n                    <li\n                        v-for=\"(val,index) in category\"\n                        :key=\"val.mallCategoryId\"\n                        :class=\"{active:leftTabIndex==index}\"\n                        @click=\"item(val,index)\"\n                    >{{val.mallCategoryName}}</li>\n                </ul>\n            </div>\n            <div class=\"right\" ref=\"right\">\n                <div class=\"empty\">\n                    <van-tabs v-model=\"currentActive\" @click=\"onClick\">\n                        <Scroll\n                            v-show=\"!showFlag\"\n                            :data=\"dataList\"\n                            class=\"scroll\"\n                            @scroll=\"scroll\"\n                            :listenScroll=\"listenScroll\"\n                            ref=\"scroll\"\n                        >\n                            <div>\n                                <van-tab v-for=\"val in list\" :title=\"val.mallSubName\" :key=\"val.mallSubId\">\n                                    <GoodsList :list=\"dataList\"/>\n                                </van-tab>\n                            </div>\n                        </Scroll>\n                    </van-tabs>\n                    <div class=\"null\" v-show=\"!dataList.length && !showFlag\">暂无数据~~</div>\n                </div>\n            </div>\n        </div>\n        <BaseFooter active='1'/>\n        <BaseLoding :showFlag=\"showFlag\"/>\n        <router-view/>\n    </div>\n</template>\n<script>\nimport { mapGetters, mapMutations, mapActions } from \"vuex\";\nimport Scroll from \"public/Scroll\";\nimport GoodsList from \"public/GoodsList\";\nimport BaseFooter from 'public/BaseFooter'\nimport { vuexData } from \"js/mixin\";\nexport default {\n    name: 'Category',\n    mixins: [ vuexData],\n    data() {\n        return {\n            leftTabIndex: 0,\n            list: \"\",\n            currentActive: 0,\n            dataList: [],\n            listenScroll: true,\n            isLoading: false,\n            defaultId: \"2c9f6c946016ea9b016016f79c8e0000\",\n            Category: false\n        };\n    },\n\n    components: {\n        Scroll,\n        GoodsList,\n        BaseFooter\n    },\n\n    methods: {\n        scroll(x, y) {\n            console.log(x, y);\n        },\n        item(val, i) {\n            this.currentActive = 0;\n            this.list = val.bxMallSubDto;\n            if (this.leftTabIndex == i) return;\n            this.leftTabIndex = i;\n            let mallSubId = val.bxMallSubDto[0].mallSubId;\n            this.dataList = this.categoryTabList.hasOwnProperty(mallSubId)\n                ? (this.dataList = this.categoryTabList[mallSubId])\n                : this.getList(mallSubId);\n            this.$refs.scroll.scrollTo(0, 0, 300);\n        },\n\n        onClick(index) {\n            this.dataList = [];\n            const mallSubId = this.category[this.leftTabIndex].bxMallSubDto[index].mallSubId;\n            this.dataList = this.categoryTabList.hasOwnProperty(mallSubId)\n                ? (this.dataList = this.categoryTabList[mallSubId])\n                : this.getList(mallSubId);\n        },\n\n        change(index) {\n            this.onClick(index);\n        },\n\n        async getList(id) {\n            try {\n                this.dataList = [];\n                this.showFlag = true;\n                const { data } = await this.Api.category(id);\n                if (data.code == 200) {\n                    this.showFlag = false;\n                    this.dataList = data.dataList;\n                    this.setCategoryTabList({\n                        id,\n                        list: data.dataList\n                    });\n                }\n            } catch (error) {\n                this.showFlag = false;\n                this.$toast(\"网络错误\");\n            }\n        },\n\n        async getCategory() {\n            if (!this.category.length) {\n                const { data } = await this.Api.recommend();\n                if (data.code == 200) {\n                    this.list = data.data.category[0].bxMallSubDto;\n                    this.setTab(data.data.category);\n                }\n            } else {\n                this.list = this.category[0].bxMallSubDto\n            }\n            \n        },\n\n        categorys() {\n            const id = this.$route.params.id;\n            const index = this.$route.params.index;\n            const val = this.$route.params.val;\n\n            if ((id && index) || (index == 0 && val)) {\n                this.list = val.bxMallSubDto;\n                this.leftTabIndex = index;\n                this.getList(id);\n            }\n        }\n    },\n\n    beforeRouteUpdate(to, from, next) {\n        if (from.name !== \"Category\") {\n            this.Category = true;\n        }\n        next();\n    },\n\n    activated() {\n        this.categorys();\n    },\n\n    created() {\n        const id = this.$route.params.id;\n        const index = this.$route.params.index;\n        const val = this.$route.params.val;\n        if (id && index && val) {\n            this.list = val.bxMallSubDto;\n            this.leftTabIndex = index;\n            this.getList(id);\n            return;\n        }\n        this.getList(this.defaultId);\n        this.getCategory();\n    }\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.category {\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n}\n.content {\n    display: flex;\n    position: fixed;\n    top: 39px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n\n    // background: #EFEFEF\n    .left {\n        flex: 0 0 80px;\n        background: #F1F8FF;\n        padding-bottom: 55px;\n        height: 100%;\n        overflow: hidden;\n\n        ul {\n            height: 100%;\n            overflow: hidden;\n        }\n\n        .active {\n            background: #fff;\n        }\n\n        li {\n            color: #666;\n            height: 43px;\n            line-height: 43px;\n            font-size: 14px;\n            text-align: center;\n            border-bottom: 1px solid #EFEFEF;\n        }\n    }\n\n    .right {\n        flex: 1;\n\n        .empty {\n            text-align: center;\n            font-size: 15px;\n\n            .null {\n                padding-top: 30px;\n                box-sizing: border-box;\n                color: #bbb;\n            }\n\n            .scroll {\n                overflow: hidden;\n                position: fixed;\n                bottom: 50px;\n                top: 85px;\n            }\n        }\n    }\n}\n</style>\n// 姓名，电话"]}]}