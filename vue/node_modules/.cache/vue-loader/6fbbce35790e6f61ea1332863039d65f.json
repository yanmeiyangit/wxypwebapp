{"remainingRequest":"/Users/mia/Documents/wxypwebapp/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mia/Documents/wxypwebapp/vue/src/views/Rate.vue?vue&type=style&index=0&id=8e98dfcc&lang=stylus&scoped=true&","dependencies":[{"path":"/Users/mia/Documents/wxypwebapp/vue/src/views/Rate.vue","mtime":1554103443664},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.rate-warp {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 500;\n    background: #fff;\n\n    .goods {\n        display: flex;\n        padding-top: 10px;\n\n        img {\n            width: 30%;\n            height: 80px;\n            flex: 0 0 30%;\n            object-fit: scale-down;\n            margin-right: 10px;\n            border-radius: 5px;\n        }\n\n        div {\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n\n            .rate-txt {\n                margin-top: 10px;\n            }\n\n            .rate {\n                margin-top: 20px;\n            }\n\n            .van-rate {\n                display: flex;\n                flex-direction: row;\n            }\n        }\n    }\n\n    .btn {\n        width: 90%;\n        margin: 30px auto;\n    }\n\n    .checkbox {\n        padding-left: 15px;\n    }\n}\n",{"version":3,"sources":["Rate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Rate.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <!-- 商品评论 -->\n    <div class=\"rate-warp\">\n        <van-nav-bar title=\"评价中心\" left-arrow @click-left=\"back\"/>\n        <div class=\"goods\">\n            <img :src=\"goodsOne.image_path\" alt srcset>\n            <div>\n                <p class=\"rate-txt\">商品评分</p>\n                <p class=\"rate\">\n                    <van-rate color=\"#e0322b\" v-model=\"rate\"/>\n                </p>\n            </div>\n        </div>\n        <div>\n            <van-cell-group>\n                <van-field\n                    v-model=\"message\"\n                    type=\"textarea\"\n                    placeholder=\"说说你的购买感受吧~~\"\n                    rows=\"6\"\n                    autosize\n                    maxlength=\"120\"\n                />\n            </van-cell-group>\n            <Upload @getFiles=\"getImageList\" @removeFiles=\"removeImage\" ref=\"upload\"/>\n        </div>\n        <div class=\"checkbox\">\n            <van-checkbox v-model=\"checked\" checked-color=\"#e0322b\">匿名评价</van-checkbox>\n        </div>\n        <div class=\"btn\">\n            <van-button type=\"primary\" size=\"large\" @click=\"submit\">提交</van-button>\n        </div>\n        <!-- <van-uploader :after-read=\"onRead\">\n            <van-icon name=\"photograph\" />\n        </van-uploader>-->\n    </div>\n</template>\n\n<script>\nimport Upload from \"@/components/rate/Upload\";\nimport {vuexData} from 'js/mixin'\nexport default {\n    name: \"Rate\",\n    mixins:[vuexData],\n    props: [\"id\"],\n    data() {\n        return {\n            rate: 5,\n            message: \"\",\n            checked: false,\n            goodsOne: \"\",\n            _id: \"\", // 数据库单条id\n            order_id: \"\", //  订单id\n            imgList: [], //已上传的图片集合\n        };\n    },\n\n    components: {\n        Upload\n    },\n    methods: {\n\n        async submit() {\n            // console.log(this.imgList);\n            if (!this.message) {\n                return this.$toast(\"请输入需要提交的内容\");\n            }\n            const datas = {\n                id: this.id,\n                rate: this.rate,\n                content: this.message,\n                anonymous: this.checked,\n                _id: this._id,\n                order_id: this.order_id,\n                image: this.imgList\n            };\n            const { data } = await this.Api.comment(datas);\n            if (data.code == 200) {\n                this.$toast(data.msg);\n                \n                setTimeout(() => {\n                    this.message = \"\";\n                    this.$router.go(-1);\n                    this.imgList = []\n                    this.$refs.upload.clearFiles()\n                }, 1500);\n            }\n        },\n        getImageList(files) {\n            this.$nextTick(() => {\n                for (let i = 0, len = files.length; i < len; i++) {\n                    this.imgList.push(files[i].src.split(\"base64,\")[1]);\n                }\n            });\n        },\n        //删除图片\n        removeImage(index) {\n            this.imgList.splice(index, 1);\n        }\n    },\n\n    async created() {\n        this._id = this.$route.params._id;\n        this.order_id = this.$route.params.order_id;\n        try {\n            const { data } = await this.Api.goodOne(this.id);\n            if (data.code == 200) {\n                this.goodsOne = data.goods.goodsOne;\n            } else {\n                this.$toast(\"请先登录\");\n            }\n        } catch (error) {\n            this.$toast(\"网络错误\");\n        }\n    }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n.rate-warp {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 500;\n    background: #fff;\n\n    .goods {\n        display: flex;\n        padding-top: 10px;\n\n        img {\n            width: 30%;\n            height: 80px;\n            flex: 0 0 30%;\n            object-fit: scale-down;\n            margin-right: 10px;\n            border-radius: 5px;\n        }\n\n        div {\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n\n            .rate-txt {\n                margin-top: 10px;\n            }\n\n            .rate {\n                margin-top: 20px;\n            }\n\n            .van-rate {\n                display: flex;\n                flex-direction: row;\n            }\n        }\n    }\n\n    .btn {\n        width: 90%;\n        margin: 30px auto;\n    }\n\n    .checkbox {\n        padding-left: 15px;\n    }\n}\n</style>\n\n"]}]}