{"remainingRequest":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/mia/Documents/wxypapp/Vue-shopping/vue/src/views/Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/src/views/Category.vue","mtime":1554103443662},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters, mapMutations, mapActions } from \"vuex\";\nimport Scroll from \"public/Scroll\";\nimport GoodsList from \"public/GoodsList\";\nimport BaseFooter from 'public/BaseFooter';\nimport { vuexData } from \"js/mixin\";\nexport default {\n  name: 'Category',\n  mixins: [vuexData],\n  data: function data() {\n    return {\n      leftTabIndex: 0,\n      list: \"\",\n      currentActive: 0,\n      dataList: [],\n      listenScroll: true,\n      isLoading: false,\n      defaultId: \"2c9f6c946016ea9b016016f79c8e0000\",\n      Category: false\n    };\n  },\n  components: {\n    Scroll: Scroll,\n    GoodsList: GoodsList,\n    BaseFooter: BaseFooter\n  },\n  methods: {\n    scroll: function scroll(x, y) {\n      console.log(x, y);\n    },\n    item: function item(val, i) {\n      this.currentActive = 0;\n      this.list = val.bxMallSubDto;\n      if (this.leftTabIndex == i) return;\n      this.leftTabIndex = i;\n      var mallSubId = val.bxMallSubDto[0].mallSubId;\n      this.dataList = this.categoryTabList.hasOwnProperty(mallSubId) ? this.dataList = this.categoryTabList[mallSubId] : this.getList(mallSubId);\n      this.$refs.scroll.scrollTo(0, 0, 300);\n    },\n    onClick: function onClick(index) {\n      this.dataList = [];\n      var mallSubId = this.category[this.leftTabIndex].bxMallSubDto[index].mallSubId;\n      this.dataList = this.categoryTabList.hasOwnProperty(mallSubId) ? this.dataList = this.categoryTabList[mallSubId] : this.getList(mallSubId);\n    },\n    change: function change(index) {\n      this.onClick(index);\n    },\n    getList: function () {\n      var _getList = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(id) {\n        var _ref, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                this.dataList = [];\n                this.showFlag = true;\n                _context.next = 5;\n                return this.Api.category(id);\n\n              case 5:\n                _ref = _context.sent;\n                data = _ref.data;\n\n                if (data.code == 200) {\n                  this.showFlag = false;\n                  this.dataList = data.dataList;\n                  this.setCategoryTabList({\n                    id: id,\n                    list: data.dataList\n                  });\n                }\n\n                _context.next = 14;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n                this.showFlag = false;\n                this.$toast(\"网络错误\");\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 10]]);\n      }));\n\n      function getList(_x) {\n        return _getList.apply(this, arguments);\n      }\n\n      return getList;\n    }(),\n    getCategory: function () {\n      var _getCategory = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _ref2, data;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.category.length) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                _context2.next = 3;\n                return this.Api.recommend();\n\n              case 3:\n                _ref2 = _context2.sent;\n                data = _ref2.data;\n\n                if (data.code == 200) {\n                  this.list = data.data.category[0].bxMallSubDto;\n                  this.setTab(data.data.category);\n                }\n\n                _context2.next = 9;\n                break;\n\n              case 8:\n                this.list = this.category[0].bxMallSubDto;\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getCategory() {\n        return _getCategory.apply(this, arguments);\n      }\n\n      return getCategory;\n    }(),\n    categorys: function categorys() {\n      var id = this.$route.params.id;\n      var index = this.$route.params.index;\n      var val = this.$route.params.val;\n\n      if (id && index || index == 0 && val) {\n        this.list = val.bxMallSubDto;\n        this.leftTabIndex = index;\n        this.getList(id);\n      }\n    }\n  },\n  beforeRouteUpdate: function beforeRouteUpdate(to, from, next) {\n    if (from.name !== \"Category\") {\n      this.Category = true;\n    }\n\n    next();\n  },\n  activated: function activated() {\n    this.categorys();\n  },\n  created: function created() {\n    var id = this.$route.params.id;\n    var index = this.$route.params.index;\n    var val = this.$route.params.val;\n\n    if (id && index && val) {\n      this.list = val.bxMallSubDto;\n      this.leftTabIndex = index;\n      this.getList(id);\n      return;\n    }\n\n    this.getList(this.defaultId);\n    this.getCategory();\n  }\n};",{"version":3,"sources":["Category.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class='page-tab category'>\n        <van-nav-bar title=\"商品分类\" :left-arrow=\"false\" fixed/>\n        <div class=\"content\">\n            <div class=\"left\" ref=\"left\">\n                <ul>\n                    <li\n                        v-for=\"(val,index) in category\"\n                        :key=\"val.mallCategoryId\"\n                        :class=\"{active:leftTabIndex==index}\"\n                        @click=\"item(val,index)\"\n                    >{{val.mallCategoryName}}</li>\n                </ul>\n            </div>\n            <div class=\"right\" ref=\"right\">\n                <div class=\"empty\">\n                    <van-tabs v-model=\"currentActive\" @click=\"onClick\">\n                        <Scroll\n                            v-show=\"!showFlag\"\n                            :data=\"dataList\"\n                            class=\"scroll\"\n                            @scroll=\"scroll\"\n                            :listenScroll=\"listenScroll\"\n                            ref=\"scroll\"\n                        >\n                            <div>\n                                <van-tab v-for=\"val in list\" :title=\"val.mallSubName\" :key=\"val.mallSubId\">\n                                    <GoodsList :list=\"dataList\"/>\n                                </van-tab>\n                            </div>\n                        </Scroll>\n                    </van-tabs>\n                    <div class=\"null\" v-show=\"!dataList.length && !showFlag\">暂无数据~~</div>\n                </div>\n            </div>\n        </div>\n        <BaseFooter active='1'/>\n        <BaseLoding :showFlag=\"showFlag\"/>\n        <router-view/>\n    </div>\n</template>\n<script>\nimport { mapGetters, mapMutations, mapActions } from \"vuex\";\nimport Scroll from \"public/Scroll\";\nimport GoodsList from \"public/GoodsList\";\nimport BaseFooter from 'public/BaseFooter'\nimport { vuexData } from \"js/mixin\";\nexport default {\n    name: 'Category',\n    mixins: [ vuexData],\n    data() {\n        return {\n            leftTabIndex: 0,\n            list: \"\",\n            currentActive: 0,\n            dataList: [],\n            listenScroll: true,\n            isLoading: false,\n            defaultId: \"2c9f6c946016ea9b016016f79c8e0000\",\n            Category: false\n        };\n    },\n\n    components: {\n        Scroll,\n        GoodsList,\n        BaseFooter\n    },\n\n    methods: {\n        scroll(x, y) {\n            console.log(x, y);\n        },\n        item(val, i) {\n            this.currentActive = 0;\n            this.list = val.bxMallSubDto;\n            if (this.leftTabIndex == i) return;\n            this.leftTabIndex = i;\n            let mallSubId = val.bxMallSubDto[0].mallSubId;\n            this.dataList = this.categoryTabList.hasOwnProperty(mallSubId)\n                ? (this.dataList = this.categoryTabList[mallSubId])\n                : this.getList(mallSubId);\n            this.$refs.scroll.scrollTo(0, 0, 300);\n        },\n\n        onClick(index) {\n            this.dataList = [];\n            const mallSubId = this.category[this.leftTabIndex].bxMallSubDto[index].mallSubId;\n            this.dataList = this.categoryTabList.hasOwnProperty(mallSubId)\n                ? (this.dataList = this.categoryTabList[mallSubId])\n                : this.getList(mallSubId);\n        },\n\n        change(index) {\n            this.onClick(index);\n        },\n\n        async getList(id) {\n            try {\n                this.dataList = [];\n                this.showFlag = true;\n                const { data } = await this.Api.category(id);\n                if (data.code == 200) {\n                    this.showFlag = false;\n                    this.dataList = data.dataList;\n                    this.setCategoryTabList({\n                        id,\n                        list: data.dataList\n                    });\n                }\n            } catch (error) {\n                this.showFlag = false;\n                this.$toast(\"网络错误\");\n            }\n        },\n\n        async getCategory() {\n            if (!this.category.length) {\n                const { data } = await this.Api.recommend();\n                if (data.code == 200) {\n                    this.list = data.data.category[0].bxMallSubDto;\n                    this.setTab(data.data.category);\n                }\n            } else {\n                this.list = this.category[0].bxMallSubDto\n            }\n            \n        },\n\n        categorys() {\n            const id = this.$route.params.id;\n            const index = this.$route.params.index;\n            const val = this.$route.params.val;\n\n            if ((id && index) || (index == 0 && val)) {\n                this.list = val.bxMallSubDto;\n                this.leftTabIndex = index;\n                this.getList(id);\n            }\n        }\n    },\n\n    beforeRouteUpdate(to, from, next) {\n        if (from.name !== \"Category\") {\n            this.Category = true;\n        }\n        next();\n    },\n\n    activated() {\n        this.categorys();\n    },\n\n    created() {\n        const id = this.$route.params.id;\n        const index = this.$route.params.index;\n        const val = this.$route.params.val;\n        if (id && index && val) {\n            this.list = val.bxMallSubDto;\n            this.leftTabIndex = index;\n            this.getList(id);\n            return;\n        }\n        this.getList(this.defaultId);\n        this.getCategory();\n    }\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.category {\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n}\n.content {\n    display: flex;\n    position: fixed;\n    top: 39px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n\n    // background: #EFEFEF\n    .left {\n        flex: 0 0 80px;\n        background: #F1F8FF;\n        padding-bottom: 55px;\n        height: 100%;\n        overflow: hidden;\n\n        ul {\n            height: 100%;\n            overflow: hidden;\n        }\n\n        .active {\n            background: #fff;\n        }\n\n        li {\n            color: #666;\n            height: 43px;\n            line-height: 43px;\n            font-size: 14px;\n            text-align: center;\n            border-bottom: 1px solid #EFEFEF;\n        }\n    }\n\n    .right {\n        flex: 1;\n\n        .empty {\n            text-align: center;\n            font-size: 15px;\n\n            .null {\n                padding-top: 30px;\n                box-sizing: border-box;\n                color: #bbb;\n            }\n\n            .scroll {\n                overflow: hidden;\n                position: fixed;\n                bottom: 50px;\n                top: 85px;\n            }\n        }\n    }\n}\n</style>\n// 姓名，电话"],"sourceRoot":"src/views"}]}