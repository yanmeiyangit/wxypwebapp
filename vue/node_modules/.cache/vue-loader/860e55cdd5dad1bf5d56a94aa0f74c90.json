{"remainingRequest":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/mia/Documents/wxypapp/Vue-shopping/vue/src/views/Details.vue?vue&type=style&index=0&id=14d957f8&lang=less&scoped=true&","dependencies":[{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/src/views/Details.vue","mtime":1554103443663},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_css-loader@1.0.1@css-loader/index.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js","mtime":1554104154590},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypapp/Vue-shopping/vue/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.titlename:not(:last-child):after {\n    left: 0;\n}\n.scroll {\n    position: fixed;\n    top: 0px;\n    bottom: 50px;\n    left: 0;\n    right: 0;\n    overflow: hidden;\n}\n.sku {\n    height: 250px;\n    background: #fff;\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 1001;\n    .close {\n        position: absolute;\n        right: 0%;\n        top: 0%;\n        font-size: 18px;\n        z-index: 200;\n        padding: 10px;\n    }\n    .goods-top {\n        position: relative;\n        height: 90px;\n        display: flex;\n        .image_path {\n            flex: 0 0 80px;\n            transform: translate3d(16px, -10px, 0);\n            width: 80px;\n            height: 80px;\n            border: 1px solid #eee;\n        }\n        .goods-right {\n            padding-left: 30px;\n            flex: 1;\n            .goods-name {\n                font-size: 14px;\n                margin-top: 10px;\n                padding-right: 35px;\n                line-height: 1.4;\n            }\n            .pic {\n                margin-top: 10px;\n                color: #ff4444;\n                font-size: 14px;\n            }\n        }\n    }\n    .goods-bottom {\n        height: 70px;\n        padding: 10px 16px 10px 16px;\n        box-sizing: border-box;\n        display: flex;\n        .left {\n            flex: 0 0 60%;\n            width: 60%;\n            .num {\n                font-size: 12px;\n            }\n            .totle {\n                margin-top: 15px;\n                color: #999;\n                font-size: 12px;\n                span {\n                    color: #f44;\n                    margin-left: 10px;\n                    font-size: 12px;\n                }\n            }\n        }\n    }\n    .bottom {\n        height: 50px;\n        background: #f44;\n        text-align: center;\n        line-height: 50px;\n        font-size: 16px;\n        color: #fff;\n        letter-spacing: 2px;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n    }\n}\n\n.sku-layer {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.7);\n    z-index: 1000;\n}\n.goods {\n    padding-bottom: 50px;\n    background: #fff;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 1000;\n    // overflow: auto;\n    &-swipe {\n        img {\n            width: 100%;\n            height: 400px;\n            display: block;\n        }\n    }\n    &-title {\n        font-size: 16px;\n    }\n    &-price {\n        color: #f44;\n    }\n    &-express {\n        color: #999;\n        font-size: 12px;\n        padding: 5px 15px;\n    }\n    &-cell-group {\n        margin: 15px 0;\n        .van-cell__value {\n            color: #999;\n        }\n    }\n    &-tag {\n        margin-left: 5px;\n    }\n}\n\n.active-1 {\n    min-height: 300px;\n}\n.comment {\n    margin-top: 15px;\n    .comment-content {\n        display: flex;\n        margin: 12px;\n        &-first-child {\n            margin-top: 50px;\n        }\n        .avatar {\n            flex: 0 0 35px;\n            width: 35px;\n            margin-right: 20px;\n            img {\n                width: 38px;\n                height: 38px;\n                border: 1px solid #eee;\n                border-radius: 50%;\n            }\n        }\n        .desc {\n            flex: 1;\n            padding-bottom: 8px;\n            display: flex;\n            flex-direction: column;\n            &-last-child::before {\n                border: 0;\n            }\n            .fist {\n                display: flex;\n                flex-direction: row;\n                justify-content: space-between;\n                .name {\n                    font-size: 14px;\n                    olor: grey;\n                }\n                .num {\n                    color: gray;\n                    font-size: 14px;\n                }\n            }\n            .timer {\n                color: grey;\n                margin-top: 8px;\n            }\n            .cont {\n                margin-top: 8px;\n                color: #333;\n                overflow: hidden;\n                word-wrap: break-word;\n                word-break: break-all;\n                text-align: justify;\n                font-size: 14px;\n                line-height: 1.6;\n            }\n            .img-content {\n                display: flex;\n                width: 100%;\n                flex-wrap: wrap;\n                \n                .img {\n                    flex: 0 0 80px;\n                    width: 90px;\n                    flex-wrap: wrap;\n                    object-fit: cover;\n                    height: 90px;\n                    border-radius: 3px;\n                    margin-bottom: 5px;\n                    margin-right: 6px;\n                }\n                .img1 {\n                    flex: 1;\n                    height: 200px;\n                    margin-top: 10px;\n                }\n                .img2 {\n                    flex: 0 0 49%;\n                    height: 110px;\n                    margin: 0;\n                    margin-top: 10px;\n                }\n            }\n        }\n    }\n}\n.like {\n    position: relative;\n    display: flex;\n    align-items: center;\n    .like-o {\n        font-size: 20px;\n        position: absolute;\n        right: 35%;\n    }\n    .like2 {\n        font-size: 20px;\n        position: absolute;\n        right: 8%;\n        color: red;\n    }\n}\n.nocomment {\n    text-align: center;\n    color: #333;\n    margin-top: 50px;\n}\n.bounce2-enter-active {\n    animation: bounce-in 0.3s;\n}\n.bounce2-leave-active {\n    animation: bounce-in 0.3s reverse;\n}\n@keyframes bounce-in {\n    0% {\n        transform: translate3d(0, 100%, 0);\n    }\n\n    100% {\n        transform: translate3d(0, 0, 0);\n    }\n}\n.fade-enter-active,\n.fade-leave-active {\n    transition: opacity 0.5s;\n}\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\n    opacity: 0;\n}\n\n.active-1 .comment:last-child .comment-content .desc::before {\n    border: none;\n}\n.img-content2 {\n    justify-content: space-between\n}\n",{"version":3,"sources":["Details.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Details.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    \n    <div class=\"goods\">\n        <van-goods-action class=\"van-goods-sku\">\n            <van-goods-action-mini-btn icon=\"wap-home\" @click=\"goHome\">首 页</van-goods-action-mini-btn>\n            <van-goods-action-mini-btn icon=\"shopping-cart-o\" @click=\"onClickCart\">购物车</van-goods-action-mini-btn>\n            <van-goods-action-big-btn @click=\"addShops\">加入购物车</van-goods-action-big-btn>\n            <van-goods-action-big-btn primary @click=\"purchase\">立即购买</van-goods-action-big-btn>\n        </van-goods-action>\n        <Scroll\n            class=\"scroll\"\n            :bounce=\"bounce\"\n            ref=\"scroll\"\n            :pullup=\"true\"\n            @scrollToEnd=\"scrollToEnd\"\n        >\n            <div>\n                <van-swipe\n                    class=\"goods-swipe\"\n                    :autoplay=\"3000\"\n                    @change=\"onChange\"\n                    :touchable=\"false\"\n                >\n                    <van-swipe-item>\n                        <img\n                            :src=\"goods.image\"\n                            @click=\"showImagePreview\"\n                            ref=\"swiperImg\"\n                            :onerror=\"defaultImg\"\n                        >\n                    </van-swipe-item>\n                    <van-swipe-item>\n                        <img\n                            :src=\"goods.image\"\n                            @click=\"showImagePreview\"\n                            ref=\"swiperImg2\"\n                            :onerror=\"defaultImg\"\n                        >\n                    </van-swipe-item>\n                    <div class=\"custom-indicator\" slot=\"indicator\">{{ current + 1 }}/2</div>\n                </van-swipe>\n                <div v-show=\"!showFlag\">\n                    <van-cell-group>\n                        <van-cell class='titlename'>\n                            <div class=\"goods-title\">{{ goods.name }}</div>\n                            <div class=\"goods-price\">￥{{ goods.present_price }}</div>\n                        </van-cell>\n                        <van-cell class=\"goods-express\">\n                            <van-col span=\"9\">运费：{{ goods.express || 0}}</van-col>\n                            <van-col span=\"9\">剩余：{{ goods.amount }}</van-col>\n                            <van-col span=\"6\" class=\"like\">\n                                {{!isCollectionFlag?'取消收藏':'收藏'}}：\n                                <van-icon\n                                    :name=\"!isCollectionFlag?'like':'like-o'\"\n                                    @click=\"collection\"\n                                    class=\"like-o\"\n                                    :class=\"{like2:!isCollectionFlag}\"\n                                />\n                            </van-col>\n                        </van-cell>\n                    </van-cell-group>\n\n                    <van-cell-group class=\"goods-cell-group\">\n                        <van-cell value=\"进入店铺\" icon=\"shop\" is-link>\n                            <template slot=\"title\">\n                                <span class=\"van-cell-text\">有赞的店</span>\n                                <van-tag class=\"goods-tag\" type=\"danger\">官方</van-tag>\n                            </template>\n                        </van-cell>\n                    </van-cell-group>\n\n                    <div>\n                        <van-tabs v-model=\"currentActive\" class=\"datails-tabs\">\n                            <van-tab v-for=\"val in item\" :title=\"val.title\" :key=\"val.id\">\n                                <div\n                                    v-show=\"currentActive == 0\"\n                                    v-html=\"goodsDetails.detail || goods.detail\"\n                                    class=\"active-0\"\n                                ></div>\n                                <div v-show=\"currentActive == 1\" class=\"active-1\">\n                                    <div class=\"comment\" v-for=\"val of dataArr\" :key=\"val._id\">\n                                        <div class=\"comment-content\">\n                                            <div class=\"avatar\">\n                                                <img\n                                                    v-if=\"!val.anonymous\"\n                                                    :src=\"val.user[0].avatar\"\n                                                    :onerror=\"defaultImg\"\n                                                    alt\n                                                    srcset\n                                                >\n                                                <img v-else :src=\"val.comment_avatar\" alt srcset>\n                                            </div>\n                                            <div class=\"desc border-bottom\">\n                                                <p class=\"fist\">\n                                                    <span\n                                                        class=\"name\"\n                                                        v-if=\"!val.anonymous\"\n                                                    >{{val.user[0].nickname}}：</span>\n                                                    <span\n                                                        class=\"name\"\n                                                        v-else\n                                                    >{{val.comment_nickname}}：</span>\n                                                    <span class=\"num\">{{val.comment_time}}</span>\n                                                </p>\n                                                <p class=\"timer\">\n                                                    <van-rate\n                                                        v-model=\"val.rate\"\n                                                        readonly\n                                                        :size=\"12\"\n                                                        color=\"#e0322b\"\n                                                    />\n                                                </p>\n                                                <p class=\"cont\">{{val.content}}</p>\n                                                <div class=\"img-content\" :class=\"setImgContentClass(val.images.length)\">\n                                                    <img v-for=\"img of val.images\" class=\"img\" :class=\"setImgClass(val.images.length)\" :key=\"img\" :src=\"img\" >\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div v-if=\"!dataArr.length\" class=\"nocomment\">该商品暂无评论噢~~</div>\n                                </div>\n                            </van-tab>\n                        </van-tabs>\n                    </div>\n                </div>\n            </div>\n        </Scroll>\n        <transition name=\"bounce2\">\n            <div class=\"sku\" v-show=\"showBase\" :class=\"{sku2:showBase}\">\n                <van-icon name=\"close\" class=\"close\" @click=\"showBase=false\"/>\n                <div class=\"goods-top border-bottom\">\n                    <img :src=\"goods.image_path\" class=\"image_path\" :onerror=\"defaultImg\">\n                    <div class=\"goods-right\">\n                        <p class=\"goods-name\">{{goods.name}}</p>\n                        <p class=\"pic\">\n                            <span>￥</span>\n                            <span>{{(goods.present_price * newCount) | toFixed}}</span>\n                        </p>\n                    </div>\n                </div>\n                <div class=\"goods-bottom border-bottom\">\n                    <div class=\"left\">\n                        <p class=\"num\">购买数量：</p>\n                        <p class=\"totle\">\n                            剩余 {{goods.amount}} 件\n                            <span>每人限购50件</span>\n                        </p>\n                    </div>\n                    <AdditionAndSubtraction @count=\"count\"/>\n                </div>\n                <div class=\"bottom\" @click=\"PurchaseImmediately\">立即购买</div>\n            </div>\n        </transition>\n        <transition name=\"fade\">\n            <div class=\"sku-layer\" v-show=\"showBase\" @click=\"showBase=false\"></div>\n        </transition>\n\n        <BaseLoding :showFlag=\"showFlag\"/>\n        <Back @back=\"back\"/>\n    </div>\n</template>\n\n<script>\nimport Scroll from \"public/Scroll\";\nimport Back from \"public/Back\";\nimport {  page, vuexData } from \"js/mixin\";\nimport { ImagePreview } from \"vant\";\nimport AdditionAndSubtraction from \"@/components/details/AdditionAndSubtraction\";\nexport default {\n    name: \"Details\",\n    props: [\"id\"], // 路由接受的参数query.id\n    mixins: [ page, vuexData],\n    components: {\n        Back,\n        AdditionAndSubtraction,\n        Scroll\n    },\n    \n    data() {\n        return {\n            goods: {},\n            defaultImg: 'this.src=\"' + require(\"img/vue.jpg\") + '\"',\n            currentActive: 0,\n            item: [{ id: 0, title: \"商品详情\" }, { id: 1, title: \"商品评论\" }],\n            isCollectionFlag: false,\n            showBase: false, // 显示sku\n            newCount: 1,\n            comment: \"\",\n            current: 0,\n            page: 1,\n            bounce: {\n                bottom: false\n            },\n        };\n    },\n\n\n    methods: {\n        formatPrice() {\n            return \"¥\" + (this.goods.price / 100).toFixed(2);\n        },\n        onChange(index) {\n            this.current = index;\n        },\n\n        onClickCart() {\n            this.$router.push({name:'ShoppingCart'});\n        },\n\n        goHome() {\n            this.$router.push({ name: \"Home\" });\n        },\n\n        setImgClass(len) {\n            return `img${len}`\n        },\n\n        setImgContentClass(len) {\n            return `img-content${len}`\n        },\n\n        // 请求商品详情\n        async goodsItem(id = this.goodsDetails.goodsId, flag = false) {\n            try {\n                if (this.isLocked()) return; // 必须等待上一次请求完成\n                this.locked(); //开始请求之前锁住\n                const { data } = await this.Api.goodOne(id, this.page);\n                if (data.code == 200) {\n                    this.setTotal(data.goods.count); // 总条数\n                    this.unLocked(); // 解锁\n                    this.$refs.swiperImg.style.opacity = 1;\n                    this.$refs.swiperImg2.style.opacity = 1;\n                    if (data.goods.goodsOne) {\n                        document.title = data.goods.goodsOne.name\n                        this.goods = data.goods.goodsOne;\n                        setTimeout(() => {\n                            this.setBrowse(data.goods.goodsOne);\n                        }, 300);\n                    }\n                    if (flag) {\n                        this.setNewData(data.goods.comment);\n                    } else {\n                        this.dataArr = data.goods.comment;\n                    }\n                }\n            } catch (error) {\n                this.showFlag = false;\n                this.isCollectionFlag = true;\n                this.unLocked(); // 解锁\n                this.$toast(\"网络错误\");\n            }\n        },\n\n        scrollToEnd() {\n            setTimeout(() => {\n                this.$refs.scroll.refresh();\n            }, 20);\n            // 评论分页\n            if (this.currentActive == 1) {\n                if (this.dataArr.length >= 5) {\n                    this.page++;\n                    if (this.hasMore()) {\n                        this.goodsItem(this.id, true);\n                    } else {\n                        this.$toast(\"没有更多评论了~~\");\n                    }\n                }\n            }\n        },\n\n        // 查询是否已收藏\n        async isCollection(id) {\n            try {\n                this.showFlag = true;\n                const { data } = await this.Api.isCollection(id);\n                if (data.code == 200) {\n                    this.showFlag = false;\n                    if (data.isCollection == 1) {\n                        // 已经收藏收藏\n                        this.isCollectionFlag = false;\n                    } else {\n                        this.isCollectionFlag = true;\n                    }\n                } else {\n                    this.showFlag = false;\n                    this.isCollectionFlag = true;\n                }\n            } catch (error) {\n                this.showFlag = false;\n            }\n            \n        },\n\n        // 点击收藏\n        async collection() {\n            if (!this.userName) {\n                this.$router.push({ name: \"Login\" });\n                return;\n            }\n            if (this.isCollectionFlag) {\n                // 收藏\n                let goods = this.goods;\n                delete goods[\"_id\"];\n                try {\n                    const { data } = await this.Api.collection(goods);\n                    if (data.code == 200) {\n                        // 收藏成功\n                        this.$toast(data.msg);\n                        this.isCollectionFlag = false;\n                    }\n                } catch (error) {\n                    this.$toast(\"收藏失败,网络错误\");\n                }\n            } else {\n                // 取消收藏\n                try {\n                    const { data } = await this.Api.cancelCollection(\n                        this.goods.id\n                    );\n                    if (data.code == 200) {\n                        this.isCollectionFlag = true;\n                    }\n                } catch (error) {\n                    this.$toast(\"网络错误\");\n                }\n            }\n        },\n\n        // 加入购物车\n        async addShops() {\n            if (!this.userName) {\n                this.$router.push({ name: \"Login\" });\n                return;\n            }\n            try {\n                const { data } = await this.Api.addShop(\n                    this.goodsDetails.goodsId || this.goodsDetails.id\n                );\n                if (data.code == 200) {\n                    this.$toast(data.msg);\n                }\n            } catch (error) {\n                this.$toast(\"网络错误\");\n            }\n        },\n\n        // 立即购买弹出sku\n        purchase() {\n            this.showBase = true;\n        },\n\n        count(newCount) {\n            this.newCount = newCount;\n        },\n\n        // 立即购买\n        PurchaseImmediately() {\n            if (!this.userName) {\n                this.$router.push({ name: \"Login\" });\n                return;\n            }\n            let goods = [\n                {\n                    check: true,\n                    count: this.newCount,\n                    cid: this.goods.id,\n                    image_path: this.goods.image_path,\n                    mallPrice: this.goods.present_price * this.newCount,\n                    present_price: this.goods.present_price,\n                    name: this.goods.name,\n                    idDirect: true,\n                    count: this.newCount\n                }\n            ];\n            this.$router.push({ name: \"ShoppingPayMent\" });\n            this.setShopList(goods);\n        },\n\n        // 预览图片\n        showImagePreview() {\n            ImagePreview({\n                images: [this.goods.image, this.goods.image],\n                startPosition: 0,\n                showIndicators: true\n            });\n        }\n    },\n\n    created() {\n        this.goodsItem(this.id);\n        this.isCollection(\n            this.goodsDetails.goodsId || this.goodsDetails.id || this.id\n        );\n    },\n    activated() {\n        this.goodsItem(this.id);\n    },\n\n    deactivated() {\n        setTimeout(() => {\n            this.goods = {}\n            this.dataArr = []\n        }, 500);\n    },\n    mounted() {\n        document.querySelector(\".van-tabs__line\").classList.add(\"swip\");\n        this.$refs.swiperImg.style.opacity = 0;\n        this.$refs.swiperImg2.style.opacity = 0;\n    },\n\n    watch: {\n        currentActive(newV, oldV) {\n            if (newV == 1) {\n                document\n                    .querySelector(\".van-tabs__line\")\n                    .classList.remove(\"swip\");\n                this.bounce.bottom = true;\n            } else {\n                this.bounce.bottom = false;\n            }\n        }\n    }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.titlename:not(:last-child):after {\n    left: 0;\n}\n.scroll {\n    position: fixed;\n    top: 0px;\n    bottom: 50px;\n    left: 0;\n    right: 0;\n    overflow: hidden;\n}\n.sku {\n    height: 250px;\n    background: #fff;\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 1001;\n    .close {\n        position: absolute;\n        right: 0%;\n        top: 0%;\n        font-size: 18px;\n        z-index: 200;\n        padding: 10px;\n    }\n    .goods-top {\n        position: relative;\n        height: 90px;\n        display: flex;\n        .image_path {\n            flex: 0 0 80px;\n            transform: translate3d(16px, -10px, 0);\n            width: 80px;\n            height: 80px;\n            border: 1px solid #eee;\n        }\n        .goods-right {\n            padding-left: 30px;\n            flex: 1;\n            .goods-name {\n                font-size: 14px;\n                margin-top: 10px;\n                padding-right: 35px;\n                line-height: 1.4;\n            }\n            .pic {\n                margin-top: 10px;\n                color: #ff4444;\n                font-size: 14px;\n            }\n        }\n    }\n    .goods-bottom {\n        height: 70px;\n        padding: 10px 16px 10px 16px;\n        box-sizing: border-box;\n        display: flex;\n        .left {\n            flex: 0 0 60%;\n            width: 60%;\n            .num {\n                font-size: 12px;\n            }\n            .totle {\n                margin-top: 15px;\n                color: #999;\n                font-size: 12px;\n                span {\n                    color: #f44;\n                    margin-left: 10px;\n                    font-size: 12px;\n                }\n            }\n        }\n    }\n    .bottom {\n        height: 50px;\n        background: #f44;\n        text-align: center;\n        line-height: 50px;\n        font-size: 16px;\n        color: #fff;\n        letter-spacing: 2px;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n    }\n}\n\n.sku-layer {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.7);\n    z-index: 1000;\n}\n.goods {\n    padding-bottom: 50px;\n    background: #fff;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 1000;\n    // overflow: auto;\n    &-swipe {\n        img {\n            width: 100%;\n            height: 400px;\n            display: block;\n        }\n    }\n    &-title {\n        font-size: 16px;\n    }\n    &-price {\n        color: #f44;\n    }\n    &-express {\n        color: #999;\n        font-size: 12px;\n        padding: 5px 15px;\n    }\n    &-cell-group {\n        margin: 15px 0;\n        .van-cell__value {\n            color: #999;\n        }\n    }\n    &-tag {\n        margin-left: 5px;\n    }\n}\n\n.active-1 {\n    min-height: 300px;\n}\n.comment {\n    margin-top: 15px;\n    .comment-content {\n        display: flex;\n        margin: 12px;\n        &-first-child {\n            margin-top: 50px;\n        }\n        .avatar {\n            flex: 0 0 35px;\n            width: 35px;\n            margin-right: 20px;\n            img {\n                width: 38px;\n                height: 38px;\n                border: 1px solid #eee;\n                border-radius: 50%;\n            }\n        }\n        .desc {\n            flex: 1;\n            padding-bottom: 8px;\n            display: flex;\n            flex-direction: column;\n            &-last-child::before {\n                border: 0;\n            }\n            .fist {\n                display: flex;\n                flex-direction: row;\n                justify-content: space-between;\n                .name {\n                    font-size: 14px;\n                    olor: grey;\n                }\n                .num {\n                    color: gray;\n                    font-size: 14px;\n                }\n            }\n            .timer {\n                color: grey;\n                margin-top: 8px;\n            }\n            .cont {\n                margin-top: 8px;\n                color: #333;\n                overflow: hidden;\n                word-wrap: break-word;\n                word-break: break-all;\n                text-align: justify;\n                font-size: 14px;\n                line-height: 1.6;\n            }\n            .img-content {\n                display: flex;\n                width: 100%;\n                flex-wrap: wrap;\n                \n                .img {\n                    flex: 0 0 80px;\n                    width: 90px;\n                    flex-wrap: wrap;\n                    object-fit: cover;\n                    height: 90px;\n                    border-radius: 3px;\n                    margin-bottom: 5px;\n                    margin-right: 6px;\n                }\n                .img1 {\n                    flex: 1;\n                    height: 200px;\n                    margin-top: 10px;\n                }\n                .img2 {\n                    flex: 0 0 49%;\n                    height: 110px;\n                    margin: 0;\n                    margin-top: 10px;\n                }\n            }\n        }\n    }\n}\n.like {\n    position: relative;\n    display: flex;\n    align-items: center;\n    .like-o {\n        font-size: 20px;\n        position: absolute;\n        right: 35%;\n    }\n    .like2 {\n        font-size: 20px;\n        position: absolute;\n        right: 8%;\n        color: red;\n    }\n}\n.nocomment {\n    text-align: center;\n    color: #333;\n    margin-top: 50px;\n}\n.bounce2-enter-active {\n    animation: bounce-in 0.3s;\n}\n.bounce2-leave-active {\n    animation: bounce-in 0.3s reverse;\n}\n@keyframes bounce-in {\n    0% {\n        transform: translate3d(0, 100%, 0);\n    }\n\n    100% {\n        transform: translate3d(0, 0, 0);\n    }\n}\n.fade-enter-active,\n.fade-leave-active {\n    transition: opacity 0.5s;\n}\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\n    opacity: 0;\n}\n\n.active-1 .comment:last-child .comment-content .desc::before {\n    border: none;\n}\n.img-content2 {\n    justify-content: space-between\n}\n</style>"]}]}