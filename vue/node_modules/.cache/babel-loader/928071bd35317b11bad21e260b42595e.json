{"remainingRequest":"/Users/mia/Documents/wxypwebapp/vue/node_modules/babel-loader/lib/index.js!/Users/mia/Documents/wxypwebapp/vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mia/Documents/wxypwebapp/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mia/Documents/wxypwebapp/vue/src/views/AddressEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mia/Documents/wxypwebapp/vue/src/views/AddressEdit.vue","mtime":1554103443661},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mia/Documents/wxypwebapp/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mia/Documents/wxypwebapp/vue/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { vuexData } from 'js/mixin';\nimport { $toast } from 'vant';\nexport default {\n  name: 'AddressEdit',\n  mixins: [vuexData],\n  data: function data() {\n    return {\n      searchResult: [],\n      areaList: require('js/area.js').default,\n      showDelete: false\n    };\n  },\n  created: function created() {\n    if (this.addressInfo) {\n      this.showDelete = true;\n    }\n  },\n  methods: {\n    onSave: function () {\n      var _onSave = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(val) {\n        var _this = this;\n\n        var _ref, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return this.Api.postAddress({\n                  name: val.name,\n                  tel: val.tel,\n                  address: val.province + val.city + val.county + val.addressDetail,\n                  isDefault: val.isDefault,\n                  province: val.province,\n                  city: val.city,\n                  county: val.county,\n                  addressDetail: val.addressDetail,\n                  areaCode: val.areaCode,\n                  id: this.addressInfo ? this.addressInfo._id : undefined // 修改地址时候要传id\n\n                });\n\n              case 3:\n                _ref = _context.sent;\n                data = _ref.data;\n\n                if (data.code == 200) {\n                  this.$toast(data.msg);\n                  setTimeout(function () {\n                    // this.$router.go(-1)\n                    _this.goBack();\n\n                    _this.clearAddress('');\n                  }, 1000);\n                } else {\n                  this.$router.push({\n                    name: 'Login'\n                  });\n                }\n\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n                this.$toast('网络错误');\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 8]]);\n      }));\n\n      function onSave(_x) {\n        return _onSave.apply(this, arguments);\n      }\n\n      return onSave;\n    }(),\n    onDelete: function () {\n      var _onDelete = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(val) {\n        var _this2 = this;\n\n        var _ref2, data;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return this.Api.deleteAddress(val._id);\n\n              case 3:\n                _ref2 = _context2.sent;\n                data = _ref2.data;\n\n                if (data.code == 200) {\n                  this.$toast(data.msg);\n                  setTimeout(function () {\n                    // this.$router.go(-1)\n                    _this2.goBack();\n\n                    _this2.clearAddress('');\n                  }, 1000);\n                } else {\n                  this.$router.push({\n                    name: 'Login'\n                  });\n                }\n\n                _context2.next = 11;\n                break;\n\n              case 8:\n                _context2.prev = 8;\n                _context2.t0 = _context2[\"catch\"](0);\n                this.$toast('网络错误');\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 8]]);\n      }));\n\n      function onDelete(_x2) {\n        return _onDelete.apply(this, arguments);\n      }\n\n      return onDelete;\n    }(),\n    goBack: function goBack() {\n      var _this3 = this;\n\n      this.$router.go(-1);\n      this.$router.animate = 1;\n      setTimeout(function () {\n        _this3.clearAddress('');\n      }, 300);\n    }\n  }\n};",{"version":3,"sources":["AddressEdit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <!-- 新增和编辑地址 -->\n    <div class=\"address-edit\">\n        <van-nav-bar\n            title=\"编辑地址\"\n            left-arrow\n            @click-left=\"goBack\"\n        />\n        <div>\n            <van-address-edit\n                :area-list=\"areaList\"\n                :show-delete='showDelete'\n                show-set-default\n                show-search-result\n                :addressInfo='addressInfo'\n                :search-result=\"searchResult\"\n                @save=\"onSave\"\n                @delete=\"onDelete\"\n            />\n        </div>\n    </div>\n</template>\n\n<script>\nimport {vuexData} from 'js/mixin'\nimport {$toast} from 'vant'\nexport default {\n    name: 'AddressEdit',\n    mixins:[vuexData],\n    data() {\n        return {\n            searchResult: [],\n            areaList: require('js/area.js').default,\n            showDelete: false\n        }\n    },\n\n    created() {\n        if (this.addressInfo) {\n            this.showDelete = true\n        }\n    },\n    methods: {\n        async onSave(val) {\n            // 以下参数在api接口查看详情\n            try {\n                const {data} = await this.Api.postAddress({\n                        name: val.name,\n                        tel: val.tel,\n                        address: val.province + val.city + val.county + val.addressDetail,\n                        isDefault: val.isDefault,\n                        province: val.province,\n                        city: val.city,\n                        county: val.county,\n                        addressDetail: val.addressDetail,\n                        areaCode: val.areaCode,\n                        id: this.addressInfo ? this.addressInfo._id : undefined  // 修改地址时候要传id\n                })\n                    if (data.code == 200) {\n                        this.$toast(data.msg);\n                        setTimeout(() => {\n                            // this.$router.go(-1)\n                            this.goBack()\n                            this.clearAddress('')\n                        }, 1000);\n                    } else {\n                        this.$router.push({name: 'Login'})\n                    }\n                \n            } catch (error) {\n                this.$toast('网络错误')\n            }\n            \n        },\n        async onDelete(val) {\n            try {\n                const {data} = await this.Api.deleteAddress(val._id)\n                if (data.code == 200) {\n                    this.$toast(data.msg);\n                    setTimeout(() => {\n                        // this.$router.go(-1)\n                        this.goBack()\n                        this.clearAddress('')\n                    }, 1000);\n                }else {\n                    this.$router.push({name: 'Login'})\n                }\n            } catch (error) {\n                this.$toast('网络错误')\n            }\n        },\n        \n        goBack() {\n            this.$router.go(-1)\n            this.$router.animate = 1\n            setTimeout(() => {\n                this.clearAddress('')\n            }, 300);\n        },\n\n    }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.address-edit\n    position fixed\n    top 0px\n    left 0\n    right 0\n    bottom 0\n    z-index 200\n    background #fff\n.bounce2-enter-active {\n    animation: bounce-in .3s;\n        }\n    .bounce2-leave-active {\n            animation: bounce-in .3s reverse;\n            }\n    @keyframes bounce-in {\n    0% {\n        transform: translate3d(-100%,0,0)\n        }\n    \n    100% {\n        transform: translate3d(0,0,0)\n        }\n}     \n</style>"],"sourceRoot":"src/views"}]}